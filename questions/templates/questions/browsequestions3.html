{% load static %}
<!DOCTYPE html>
<head>
    <title>expt browse questions</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
          integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <link rel="stylesheet" href="{% static 'questions/css/browsequestion_style2.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.css">

</head>
<body>

<div class="navbar-fixed">
    <nav class="nav-wrapper indigo">
        <div class="container">
            <a href="#" class="brand-logo tooltipped" data-position="right" data-tooltip="Hi Friend">Logo</a>
            <a href="#" class="sidenav-trigger" data-target="mobile-links">
                <i class="material-icons">menu</i>
            </a>
            <ul class="right hide-on-med-and-down">
                <li><a href="#" alt="Login">
                    <i class="material-icons tooltipped waves-effect waves-light" data-position="right"
                       data-tooltip="Home">home</i>
                </a></li><!--Back to home-->
            </ul>
        </div>
    </nav>
</div>

<ul class="sidenav" id="mobile-links">
    <li><a href="">Home</a></li>
    <li><a href="">Login</a></li>
    <li><a href="">Register</a></li>
    <li><a href="">Contact</a></li>
</ul>

<!--Parallax-->

<!--cards for filtering and sorting-->
<div class="filter">
    <form method="get" action="" id="filter_form">
        <!--card for filtering using select-->
        <div class="col s12 m6">
            <div class="card">
                <div class="card-content">

                    <div class="input-field card-title">
                        {{ filter_form.category }}
                    </div>

                </div>
            </div>
        </div>

        <!--card for sorting-->
        <div class="col s12 m6">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">Sort By</span>
                    {% for choice in filter_form.sort_by.field.choices %}
                        <p>
                            <label>
                                <input type="radio" id="id_sort_by_{{ choice.0|add:"-1"}}" class="filled-in" name="sort_by" value="{{ choice.0 }}" {% if filter_form.sort_by.value == choice.0|stringformat:"i" %} checked="checked" {% endif %}/>
                                <span>{{ choice.1 }}</span>
                            </label>
                        </p>
                    {% endfor %}
                </div>
            </div>
        </div>
        <!--reverse toggle-->
        <div class="switch">
            <label class="reverse">
                Reverse False
                {{ filter_form.reverse }}
                <span class="lever"></span>
                Reverse True
            </label>
        </div>
    </form>
<script>

    form = document.getElementById('filter_form');
    document.getElementById('id_reverse').onchange = function () {
        form.submit()
    };
    document.getElementById('id_category').onchange = function () {
        form.submit()
    };
    rad = form.sort_by;
    for(var i = 0; i < rad.length; i++) {
        rad[i].addEventListener('change', function () {
            form.submit()
        });
    }

</script>
</div>
<!--filter ends-->


<!--question cards with description-->

<!--q1-->
<div class="container">
    <div style="width:1000px;margin-top:25px;">
        <div class="infinite-container" id="all_questions">
            {% for question in questions %}
                <div class="infinite-item">
                    <ul class="collapsible popout">
                        <li>
                            <div class="collapsible-header teal white-text">
                                <div class="row" style="margin: 0;min-width:100%;">
                                    <div class="col s5 left-align">
                                        <span class="flow-text left">{{ question.title }}</span>
                                    </div>
                                    <div class="col s5 right-align">
                                        <i class="far fa-eye fa-2x" style="color:black; padding-right: 20%;"><span
                                                style="font-size: large; font-weight: bold">1000</span></i>
                                        <i class="fas fa-trophy fa-2x"
                                           style="color:black;padding-right: 20%;"><span
                                                style="font-size: large">203</span></i>
                                        <i class="fas fa-flag-checkered" style="color:black;padding-right: 40%;"><span
                                                style="font-size: large">Medium</span></i>
                                    </div>
                                    <div class="col s2 rignt-align">
                                        <div class="chip">
                                            <img src="{{ question.category.logo.url }}"
                                                 alt="ContactPerson">{{ question.category.name }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="collapsible-body">
                                <span>{{ question.short_description }}</span>
                                <br>
                                <a class="waves-effect waves-light btn-small black right "
                                   href="{% url 'questions:view_the_question' question.unique_code %}"><i
                                        class="far fa-edit fa-2x"></i>&nbspSolve</a>
                                <br>
                            </div>
                        </li>
                    </ul>
                </div>
            {% endfor %}
        </div>
        {% if questions.has_next %}
            <a class="infinite-more-link" href="?category={{ filter_form.category.value }}&sort_by={{ filter_form.sort_by.value }}&query={{ filter_form.query.value }}&reverse={{ filter_form.reverse.value }}&page={{ questions.next_page_number }}">More</a>
        {% endif %}
        <div class="loading" style="display: none;">
            Some Loading Animation...
        </div>
    </div>
</div>
<!--parallax ends here-->
<!--should have scroller-->
<!--footer-->
<!--JavaScript at end of body for optimized loading-->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="{% static 'common_assests/materialize/js/materialize.js' %}"></script>
<script src="{% static 'common_assests/imakewebthings-waypoints-34d9f6d/lib/jquery.waypoints.min.js' %}"></script>
<script src="{% static 'common_assests/imakewebthings-waypoints-34d9f6d/lib/shortcuts/infinite.min.js' %}"></script>
<script>

    $(document).ready(function () {
        $('.sidenav').sidenav();
    });

    $(document).ready(function () {
        $('.collapsible').collapsible();
    });

    $(document).ready(function () {
        $('.tooltipped').tooltip();
    });
    /*select--*/

    $(document).ready(function () {
        $('select').formSelect();
    });

    $('.dropdown-trigger').dropdown();

    var infinite = new Waypoint.Infinite({
        element: $('.infinite-container')[0],
        onBeforePageLoad: function () {
            $('.loading').show();
        },
        onAfterPageLoad: function ($items) {
            $('.loading').hide();
            $('.collapsible').collapsible();

        }
    });

</script>
</body>
</html>
